{% extends 'main/dashboard-base.html' %}

{% block title %}
<title>Gibbi</title>
{% endblock %}

{% block extra %}
<span class="font-weight-bold text-white">{{student.first_name}} {{student.last_name}}</span>
{% endblock %}

{% block nav %}
<!-- Collapse button -->
<button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#pushNav"
aria-controls="pushNav" aria-expanded="false" aria-label="Toggle navigation">
	<span class="navbar-toggler-icon"></span>
</button>

<!-- Collapsible content -->
<div class="collapse navbar-collapse" id="pushNav">

	<!-- Links -->
	<ul class="navbar-nav mr-auto d-lg-none">
		<li class="nav-item active">
			<a class="nav-link" href="#" data-toggle="collapse" data-target="#pushNav" onclick="nav_click('your-wall')">Announcements</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="#" data-toggle="collapse" data-target="#pushNav" onclick="nav_click('push-board')">Push Board</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="#" data-toggle="collapse" data-target="#pushNav" onclick="nav_click('course-bucket')">Courses</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="#" data-toggle="collapse" data-target="#pushNav" onclick="nav_click('forums')">Forums</a>
		</li>
		<li class="nav-item">
				<a class="nav-link" href="#" data-toggle="collapse" data-target="#pushNav" onclick="nav_click('add-drop')">Add/Drop</a>
		</li>
		<li class="nav-item">
				<a class="nav-link" href="#" data-toggle="collapse" data-target="#pushNav" onclick="nav_click('account-setting')">Account</a>
		</li>
		<li class="nav-item">
				<a class="nav-link" href="#" data-toggle="collapse" data-target="#pushNav" onclick="nav_click('log-out')">Logout</a>
		</li>
	</ul>
	<!-- Links -->
</div>
<!-- Collapsible content -->
{% endblock %}

{% block content%}
{% load static %}
{% load humanize %}
	<div class="container-fluid">
			<div class="row push-min-height">
				<div class="col-lg-2 card push-corners d-none d-lg-block">
					<div class="push-sidebar">
						<div>
							<div class="push-sidebar-item" onclick="nav_click('your-wall')">
								<a href="#" class="">
									<i class="fa fa-newspaper-o mr-3" aria-hidden="true"></i>Your Push
								</a>
							</div>
							<div class="push-sidebar-item" onclick="nav_click('push-board')">
								<a href="#">
									<i class="fa fa-university mr-3" aria-hidden="true"></i>Push Board
								</a>
							</div>
							<div class="push-sidebar-item" onclick="nav_click('course-bucket')">
								<a href="#">
									<i class="fa fa-book mr-3" aria-hidden="true"></i>Courses
								</a>
							</div>
							<div class="push-sidebar-item" onclick="nav_click('forums')">
								<a href="#">
									<i class="fa fa-comments mr-3" aria-hidden="true"></i>Forums
								</a>
							</div>
							<div class="push-sidebar-item" onclick="nav_click('add-drop')">
								<a href="#">
									<i class="fa fa-plus-square mr-3" aria-hidden="true"></i>Add/Drop
								</a>
							</div>
							<div class="push-sidebar-item" onclick="nav_click('account-setting')">
								<a href="#">
									<i class="fa fa-user mr-3" aria-hidden="true"></i>Account
								</a>
							</div>
							<div class="push-sidebar-item" onclick="nav_click('log-out')">
									<a href="#">
										<i class="fa fa-sign-out mr-3" aria-hidden="true"></i>Logout
									</a>
							</div>
						</div>
						<div class="push-sidebar-item">
								<a href="https://goo.gl/forms/N2Rxsb4I6als0JL53">
									<i class="fa fa-info-circle mr-3" aria-hidden="true"></i>Send Feedback
								</a>
						</div>
					</div>
				</div>
				<div class="col-lg-10">
					<div class="row push-min-height">
							<div class="col-md-6 mt-3">
								<div id="your-wall-content" class="content hidden-area">
									{% include 'main/snippets/post-snippet.html' with source=wall read=read_tracker%}
								</div>

								<div id="push-board-content" class="content hidden-area">
									{% include 'main/snippets/post-snippet.html' with source=pushboard%}
								</div>
								<div id="course-bucket-content" class="content hidden-area">
									<div id='course-list' class="card card-body push-corners">
										<p class="meta">Click on each course to browse files</p>
										{% for class in student.class_in.all %}
											<div class="link font-weight-bold mt-2" onclick="course_click('course-list-{{forloop.counter}}',{{class.id}})">
												<a>{{class.course.name}}</a>
											</div>
										{% endfor %}

										<div id="miscellaneous" class="link font-weight-bold mt-2" onclick="course_click('miscellaneous-files')">
											Miscellaneous Files
										</div>
									</div>

									<hr>

									<div id="file-list">
										{% for class in student.class_in.all %}
											<div id="course-list-{{forloop.counter}}" class="course-files">

											</div>
										{% endfor %}

										<div id="miscellaneous-files" class="course-files">

										</div>
									</div>
								</div>

								<div id="forums" class="content">
                                    {% include 'forum/snippets/forum.html' with user_forums=user_forums trending_forums=trending_forums%}
								</div>
								
								<div id='add-drop-content' class="content hidden-area">

									<div class="card card-body push-corners">
										<form id='add-courses-form'>
										<input name="action_type" type="text" value="add" hidden/>
										{% csrf_token %}

										<div>
											<span class="h2-responsive">Add Course</span>
											<span class="meta">Browse for the courses you are taking</span>
										</div>
											<div class="recipient-list">
												{% for section in sections %}
														{% ifchanged section.department_in.id %}
																{% if not forloop.first %}
																										</div>
																								</div>
																						</div>
																				</div>
																		</div>
																</div>
																{% endif %}

												<div>
															<div class="form-control" onclick="click_hidden('department-{{forloop.counter}}')">
																<div class="d-inline-block">
																		<p>{{section.department_in.name}}</p>
																</div>
																<div class="d-inline ml-2">
																				<i class="fa fa-caret-down" aria-hidden="true"></i>
																</div>
														</div>

														<div class="hidden-area" id="department-{{forloop.counter}}">
																<div class="recipient-list">
																		<div class="recipient-data">
																				<div class="recipient-selection">
																						<div class="form-control" onclick="click_hidden('year-{{forloop.counter}}')">
																								<div class="d-inline-block">
																										<p>Year {{section.year}}</p>
																								</div>
																								<div class="d-inline ml-2">
																												<i class="fa fa-caret-down" aria-hidden="true"></i>
																								</div>
																						</div>
																				</div>

																				<div class="hidden-area" id="year-{{forloop.counter}}">
																						<div class="recipient-list">
																							{% endifchanged %}

																								{% ifchanged section.year %}
																								{% ifchanged section.department_in.id %}

																								{% else %}

																						</div>
																				</div>
																		</div>

																		<div class="recipient-data">
																				<div class="recipient-selection">
																						<div class="form-control" onclick="click_hidden('year-{{forloop.counter}}')">
																								<div class="d-inline-block">
																										<p>Year {{section.year}}</p>
																								</div>
																								<div class="d-inline ml-2">
																												<i class="fa fa-caret-down" aria-hidden="true"></i>
																								</div>
																						</div>
																				</div>

																				<div class="hidden-area" id="year-{{forloop.counter}}">
																						<div class="recipient-list">
																								{% endifchanged %}
																								{% endifchanged %}

																								<div class="recipient-data">
																										<div class="recipient-selection">
																												<div class="form-control" onclick="click_hidden('section-{{forloop.counter}}')">
																														<div class="d-inline-block">
																															<p>Section&nbsp;{{section.section_id}}</p>
																														</div>
																														<div class="d-inline ml-2">
																															<i class="fa fa-caret-down" aria-hidden="true"></i>
																														</div>
																												</div>
																										</div>

																										<div class="hidden-area" id="section-{{forloop.counter}}">
																												<div class="recipient-list">
																														{% for course in section.section_takes.all %}
																														<div class="recipient-data">
																																<div class="my-2 ml-5">
																																		<div class="d-inline">
																																				<input name="class" value="{{section.id}}-{{course.id}}" type="checkbox" />
																																		</div>

																																		<div class="d-inline">
																																				{{course.name}}
																																		</div>
																																</div>
																														</div>
																														{% endfor %}
																														</div>
																														</div>
																														</div>

																							{% empty %}
																												<div>
																														<div>
																																<div>
																																		<div>
																																				<div>
																																						<div>
																								{% endfor %}
																						</div>
																				</div>
																		</div>
																</div>
														</div>
												</div>
											</div>
											<div id="add-courses-form-notif" class="alert alert-info hidden-area" role="alert">
													<span></span>
											</div>
											<div>
												<button class="btn mt-3" type="button" onclick="add_course()">Add Classes</button>
											</div>

											</form>
										</div>

										<div class="card card-body push-corners my-3">

											<h3>Your Courses</h3>

											<div id="drop-courses-form-notif" class="alert alert-info hidden-area" role="alert">
												<span></span>
											</div>

											<table id="course-table" class="table table-striped table-hover table-borderless table-responsive">
												<tbody>
												<tr>
													<th class="font-weight-bold">Course Name</th>
													<th class="font-weight-bold">Department</th>
													<th class="font-weight-bold">Section</th>
													<th class="font-weight-bold"></th>
												</tr>

												{% for class in student.class_in.all %}
												<tr class="row-{{class.id}}">
													<td>{{class.course.name}}</td>
													<td>{{class.section.department_in}}</td>
													<td>Year {{class.section.year}} <br/>Section {{class.section.section_id}}</td>
													<td><button class="btn btn-block" type="button" onclick="drop_course('{{class.id}}')">Drop Course</button></td>
												</tr>
												{% endfor %}
												</tbody>
											</table>
										</div>
								</div>

								<div id="account-setting-content" class="content hidden-area">
									<div id="profile-form-notif" class="alert alert-info hidden-area" role="alert">
										<span></span>
									</div>
									<form id="profile-update-form" method="post">
										<div class="card card-body push-corners mb-3">
											<input name="user-type" type="text" value="student" hidden/>
											{% csrf_token %}

											<div>
												<p class="h3-responsive">Personal Information</p>
											</div>

											<div id="error-firstname" class="error alert alert-danger hidden-area" role="alert"></div>
											<div class="md-form mt-3 mb-2 mx-1">
												<input class="form-control" name="first-name" id="firstname" type="text" placeholder="First Name" value="{{student.first_name}}" required />
											</div>
											
											<div id="error-lastname" class="error alert alert-danger hidden-area" role="alert"></div>
											<div class="md-form mt-3 mb-2 mx-1">
												<input class="form-control" name="last-name" id="lastname" type="text" placeholder="Last Name" value="{{student.last_name}}" required />
											</div>

											<div class="md-form mt-3 mb-2 mx-1">
												<input class="form-control" name="reg-id" id="lastname" type="text" placeholder="Registration ID" value="{{student.reg_id}}" required />
											</div>
										</div>

										<div class="card card-body push-corners mb-3">
											<div>
												<p class="h3-responsive">School Information</p>
											</div>

											<div class="md-form mt-3 mb-2 mx-1">
												<input class="form-control" id="university" type="text" value="{{student.university_in}}" disabled />
											</div>
											
											<select name="department" id="profile-update-department" required>
												{% for department in departments %}
													{% ifchanged department.university_in %}
														<option value="" disabled>{{department.university_in}}</option>
													{% endifchanged %}

													{% if department.id == student.department_in.id %}
														<option value="{{department.id}}" selected>{{department.name}}</option>
													{% else %}
														<option value="{{department.id}}">{{department.name}}</option>
													{% endif %}
												{% endfor %}
											</select>

											<div id="error-year" class="error alert alert-danger hidden-area" role="alert"></div>
											<div class="md-form mt-4 mb-2 mx-1">
												Year
												<input class="form-control" name="year" id="profile-update-year" type="number" placeholder="Year" value="{{student.year}}" required />
											</div>

											<div id="error-section" class="error alert alert-danger hidden-area" role="alert"></div>
											<div class="md-form mt-4 mb-2 mx-1">
												Section
												<input class="form-control" name="section" id="profile-update-section" type="number" placeholder="Section" value="{{student.section}}" required />
											</div>

										</div>

										
										<div class="card card-body push-corners mb-3">
											<div>
												<p class="h3-responsive mt-3">Contact Information</p>
											</div>
											
											<div class="md-form mt-3 mb-2 mx-1">
												<div id="error-phonenum" class="my-1 alert alert-warning hidden-area" role="alert"></div>
												<input class="form-control" name="phone-number" id="phonenum" type="tel" placeholder="Phone Number" value="{{student.phone}}" required />
											</div>

											<div class="md-form mt-3 mb-2 mx-1">
												<div id="error-email" class="my-1 alert alert-warning hidden-area" role="alert"></div>
												<input class="form-control" name="email" id="email" type="email" placeholder="Email" value="{{student.email}}" required />
											</div>
										</div>

										<div class="card card-body push-corners mb-3">
											<div>
												<p>Please enter your password to save changes</p>
											</div>
											<div id="profile-form-notif" class="mt-1 alert alert-info hidden-area" role="alert">
													<span></span>
											</div>
											<div class="md-form mt-3 mb-2 mx-1">
												<div id="error-password" class="my-1 alert alert-warning hidden-area" role="alert"></div>
												<input class="form-control" name="password" id="password" type="password" placeholder="Password" required />
											</div>
											<div>
												<span id="save-changes" class="btn" onclick="account_update()">Save Changes</span>
											</div>
										</div>
									</form>
								</div>
							</div>

							<div class="col-lg-2 d-none d-lg-block"></div>

							<!-- <div class="col-lg-4 col-md-6 mt-3">
								<div id="reminder-container">
									<div id="reminder">
										{% for rem in reminder %}
										<div class="card push-corners mb-3">
											<div class="exam-reminder-header py-2 px-3">
												<span class="white-text font-weight-bold">{{ rem.reminder.title }}</span>
												<span class="meta white-text"> - {{ rem.reminder.due_date | naturaltime }}</span>
											</div>

											<div class="card-body">
												<div class="reminder-note">
													<p>{{ rem.reminder.note }}</p>
												</div>

												<div class="reminder-due">
													<div class="reminder-venue">
														<p><i class="fa fa-map-pin mr-2" aria-hidden="true"></i>Venue: {{ rem.reminder.place }}</p>
														<p><i class="fa fa-calendar mr-2" aria-hidden="true"></i>Date: {{ rem.reminder.due_date | date:"SHORT_DATE_FORMAT"}}</p>
														<p><i class="fa fa-clock-o mr-2" aria-hidden="true"></i>Time: {{ rem.reminder.due_date | date:"f A"}}</p>
													</div>
												</div>
											</div>
										</div>
										{% endfor %}
									</div>
								</div>
							</div> -->

							<div class="col-lg-4 col-md-6 mt-3">
								<div id="reminder-container">
									<div id="reminder">
										<div class="card push-corners mb-3">
											<div class="exam-reminder-header py-2 px-3">
												<span class="white-text font-weight-bold">Test 1 - Introduction to Computer Science</span>
												<br>
												<span class="meta white-text">In 2 weeks from now</span>
											</div>

											<div class="py-3 px-3">
												<div class="reminder-note">
													<p>Read from Chapter 2 and 3. Do end of chapter review questions.</p>
												</div>

												<div class="reminder-due">
													<div class="reminder-venue">
														<p><i class="fa fa-calendar mr-2" aria-hidden="true"></i>Date: March 12, 2019</p>
														<p><i class="fa fa-clock-o mr-2" aria-hidden="true"></i>Time: 2 PM (Foreign Time)</p>
													</div>
												</div>
												<div>
													<p class="meta">
															Mr. Gashaw | Feb. 7, 2018, 9:15 a.m.
													</p>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div id="reminder-container">
									<div id="reminder">
										<div class="card push-corners mb-3">
											<div class="assign-reminder-header py-2 px-3">
												<span class="white-text font-weight-bold">Assignment 1 - Wireless Communications</span>
												<br>
												<span class="meta white-text">In 3 days from now</span>
											</div>

											<div class="py-3 px-3">
												<div class="reminder-note">
													<p>Your assignment is to build a space ship using two pens, a hairband and one banana peel. Group numbers cannot exceed more than 5. ZIP photos and upload it here.</p>
												</div>

												<div class="reminder-due">
													<div class="reminder-venue">
														<p><i class="fa fa-calendar mr-2" aria-hidden="true"></i>Date: February 6, 2019</p>
														<p><i class="fa fa-clock-o mr-2" aria-hidden="true"></i>Time: 8 AM (Foreign Time)</p>
													</div>
												</div>
												<div>
													<span class="btn-block btn mb-3" data-toggle="modal" data-target="#assignModal">Submit ZIP File (10 Mb Max)</span>
												</div>
												<!-- Assignment Submission Modal -->
													<div class="modal fade" id="assignModal" tabindex="-1" role="dialog">
														<div class="modal-dialog modal-dialog-centered" role="document">
															<div class="modal-content">
																<div class="modal-header">
																	<h5 class="modal-title" id="">Assignment 1 - Wireless Communications</h5>
																	<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																		<span aria-hidden="true">&times;</span>
																	</button>
																</div>
																<form action="" class="md-form">
																	<div class="modal-body">
																		<p>Upload your assignment file and click submit.</p>
																		<div class="input-group mb-3">
																			<div class="custom-file">
																				<input type="file" class="custom-file-input" id="" name="assign-file">
																				<label class="custom-file-label" for="">Upload your assignment</label>
																			</div>
																		</div>
																		<textarea class="form-control md-textarea" name="assign-comments" id="" rows="3" placeholder="Comments (optional)"></textarea>
																	</div>
																	<div class="modal-footer">
																		<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
																		<button type="button" class="btn">Submit</button>
																	</div>
																</form>
															</div>
														</div>
													</div>
												<!-- End of Assignment Submission Modal -->
												<div>
													<p class="meta">
															Ms. Aynalem | Feb. 9, 2018, 9:15 a.m.
													</p>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
					</div>
					<div class="row mb-3 mt-1 ml-2" >
							{% include 'main/snippets/footer.html' %}
					</div>
				</div>
			</div>
	</div>
{% endblock %}

{% block script%}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

{% load static %}
<script src="{% static 'main/student-account.js' %}"></script>
<script src="{% static 'forum/forum.js' %}"></script>

<script>
	// Tooltips Initialization
$(function () {
  $('[data-toggle="tooltip"]').tooltip()
})
</script>
{% endblock %}